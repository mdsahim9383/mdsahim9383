
const delay=t=>new Promise((e=>setTimeout(e,t))),clickRecraftButton=()=>{const t=document.querySelector('button[data-testid="recraft-button"]');return t&&t.click(),Promise.resolve()},findRecraftButton=()=>{const t=document.querySelector('button[data-testid="recraft-button"]');return Promise.resolve(t&&"Recraft"===t.textContent.trim())},waitForRecraftButton=(t=1e3,e=30)=>new Promise((c=>{let r=0;const a=setInterval((async()=>{if(r>=e)return clearInterval(a),void c(!1);await findRecraftButton()&&(clearInterval(a),c(!0)),r++}),t)})),clickTogglerButton=()=>{const t=document.querySelector('[data-testid="recraft-topbar-export"] > [data-testid="toggler"]');return t&&t.click(),Promise.resolve()},clickSVGButton=()=>(document.querySelectorAll("button.c-bZNrxE.c-cfmRqm.c-cfmRqm-fGHEql-stretch-true.c-cfmRqm-kumaHe-size-s.c-cfmRqm-ffVEBR-mode-primary.c-nSdQa").forEach((t=>{"SVG"!==t.textContent.trim()||null===t.offsetParent||t.disabled||t.click()})),Promise.resolve()),clickSecondButton=()=>{const t=document.querySelector("button.c-xHEva:nth-child(2)");return t&&null!==t.offsetParent&&!t.disabled&&t.click(),Promise.resolve()},isCancelButtonPresent=()=>{const t=document.querySelector("button.c-bZNrxE.c-cfmRqm.c-cfmRqm-djDtlJ-stretch-false.c-cfmRqm-hdlaDN-size-m.c-cfmRqm-vSIUM-mode-secondary");return t&&"Cancel"===t.textContent.trim()},checkMaxConcurrencyMessage=()=>{const t=document.querySelector("div.c-kWXNTX.c-kWXNTX-ijbiex-visible-true");return t&&t.textContent.includes("Sorry, we canâ€™t recraft as fast as you click")},runSequentially=async()=>{for(let t=0;t<99;t++){if(isCancelButtonPresent()){console.log("Cancel button found. Stopping execution.");break}await delay(2e3),await clickRecraftButton();let t=!1;for(let e=0;e<5;e++){if(checkMaxConcurrencyMessage()){t=!0,console.log("Max Concurrency message found. Retrying the first button.");break}await delay(2e3)}t||(await delay(1e3),await waitForRecraftButton(),await delay(1e3),await clickTogglerButton(),await delay(1e3),await clickSVGButton(),await delay(1e3),await clickSecondButton(),await delay(1e3),await clickTogglerButton(),await delay(1e3),await clickSVGButton())}};runSequentially();
